当调用malloc()时
1. malloc开始搜寻空闲内存块，如果找到合适的就分配出去
2. 如果malloc找不到合适的空闲内存，调用brk等系统调用扩大堆区从而获得更多空闲内存
3. 调用brk后转入内核态，堆区扩大，此时扩大的这一部分只是虚拟内存，操作系统并没有分配物理内存
4. brk执行结束后返回malloc，从内核态转回用户态，malloc找到一块合适内存后返回
5. 程序继续
6. 当有代码读写新申请的内存时系统内部出现缺页中断，此时操作系统由用户态切换到内核态，此时分配真正的物理内存，再由内核态切换到用户态，程序继续